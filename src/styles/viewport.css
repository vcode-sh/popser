/* ─── Viewport ─────────────────────────────────────────────────────── */

[data-popser-viewport] {
  position: fixed;
  inset: auto;
  z-index: 9999;
  box-sizing: border-box;
  width: var(--popser-width, 356px);
  padding: 0;
  margin: 0;
  overflow: visible;
  pointer-events: none;
  background: transparent;
  /* Reset popover UA defaults (border, background, inset, margin, padding, overflow) */
  border: none;
  /* Collapsed: toasts are absolutely positioned inside this anchor point */
  /* Offset is applied via inset values in position variants below */
}

/* Position variants -- offset from browser edge via --popser-offset */
[data-popser-viewport][data-position="top-left"] {
  top: var(--popser-offset, 16px);
  left: var(--popser-offset, 16px);
}

[data-popser-viewport][data-position="top-center"] {
  top: var(--popser-offset, 16px);
  left: 50%;
  transform: translateX(-50%);
}

[data-popser-viewport][data-position="top-right"] {
  top: var(--popser-offset, 16px);
  right: var(--popser-offset, 16px);
}

[data-popser-viewport][data-position="bottom-left"] {
  bottom: var(--popser-offset, 16px);
  left: var(--popser-offset, 16px);
}

[data-popser-viewport][data-position="bottom-center"] {
  bottom: var(--popser-offset, 16px);
  left: 50%;
  transform: translateX(-50%);
}

[data-popser-viewport][data-position="bottom-right"] {
  right: var(--popser-offset, 16px);
  bottom: var(--popser-offset, 16px);
}

/* ─── RTL support ──────────────────────────────────────────────────── */

[data-popser-viewport][data-dir="rtl"][data-position="top-left"] {
  right: auto;
  left: var(--popser-offset, 16px);
}

[data-popser-viewport][data-dir="rtl"][data-position="top-right"] {
  right: var(--popser-offset, 16px);
  left: auto;
}

[data-popser-viewport][data-dir="rtl"][data-position="bottom-left"] {
  right: auto;
  left: var(--popser-offset, 16px);
}

[data-popser-viewport][data-dir="rtl"][data-position="bottom-right"] {
  right: var(--popser-offset, 16px);
  left: auto;
}

/* ─── Mobile responsive (driven by data-mobile attribute) ─────────── */

[data-popser-viewport][data-mobile] {
  top: auto;
  right: var(--popser-mobile-offset, var(--popser-offset, 16px));
  bottom: var(--popser-mobile-offset, var(--popser-offset, 16px));
  left: var(--popser-mobile-offset, var(--popser-offset, 16px));
  transform: none;
}

[data-popser-viewport][data-mobile] [data-popser-root]:not([data-anchored]) {
  width: calc(
    100vw -
    2 *
    var(--popser-mobile-offset, var(--popser-offset, 16px))
  );
}

/* On mobile, always show close button */
[data-popser-viewport][data-mobile]
  [data-popser-close][data-close-button="hover"] {
  opacity: 0.7;
}
