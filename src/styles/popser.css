@import "./tokens.css";
@import "./viewport.css";
@import "./toast.css";
@import "./transitions.css";
@import "./content.css";
@import "./controls.css";

/* ─── Arrow for anchored toasts ──────────────────────────────────── */

[data-popser-arrow] {
  width: 10px;
  height: 10px;
  background: var(--popser-bg, oklch(1 0 0));
  transform: rotate(45deg);
}

[data-popser-viewport][data-theme="dark"] [data-popser-arrow],
[data-popser-viewport][data-rich-colors] [data-popser-arrow] {
  background: inherit;
}

/* ─── Swipe exit animations (#7) ──────────────────────────────────── */
/* Base UI sets data-swipe-direction on toast roots during swipe dismissal */

/* Swipe exit: slide in swipe direction */
[data-popser-root][data-ending-style][data-swipe-direction="left"] {
  opacity: 0;
  transform: translateX(-100%);
}

[data-popser-root][data-ending-style][data-swipe-direction="right"] {
  opacity: 0;
  transform: translateX(100%);
}

[data-popser-root][data-ending-style][data-swipe-direction="up"] {
  opacity: 0;
  transform: translateY(-100%);
}

[data-popser-root][data-ending-style][data-swipe-direction="down"] {
  opacity: 0;
  transform: translateY(100%);
}

/* ─── Limit-removed exit animation (#8) ───────────────────────────── */

/* Toasts removed by limit: quick fade instead of slide */
[data-popser-root][data-ending-style][data-limited] {
  opacity: 0;
  transform: none;
}

/* ─── Reduced motion (a11y) ───────────────────────────────────────── */

@media (prefers-reduced-motion: reduce) {
  [data-popser-root] {
    transition: none;
  }

  [data-popser-close] {
    transition: none;
  }

  [data-popser-spinner-bar] {
    opacity: 0.3;
    animation: none;
  }

  [data-popser-action],
  [data-popser-cancel] {
    transition: none;
  }

  [data-popser-root][data-starting-style],
  [data-popser-root][data-ending-style] {
    opacity: 0;
    transform: none;
  }

  [data-popser-viewport]:not([data-expanded]) [data-popser-root] {
    transition: none;
  }

  [data-popser-viewport]:not([data-expanded])
    [data-popser-root]:not(:first-child)
    [data-popser-content]
    > * {
    transition: none;
  }
}
